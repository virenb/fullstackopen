{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","phoneFilter","handleFilterChange","value","onChange","PersonForm","handleSubmit","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","Persons","persons","handleDelete","filter","person","toLowerCase","startsWith","map","key","name","number","onClick","id","Notification","message","error","className","baseUrl","axios","get","newObject","post","delete","updatedPerson","put","App","useState","setPersons","setNewName","setNewNumber","setFilter","deleted","setDeleted","updated","setUpdated","updateMessage","setUpdateMessage","setError","useEffect","personService","then","response","data","event","target","preventDefault","includes","personToUpdate","p","updateAlert","window","confirm","alert","setTimeout","catch","err","personObject","concat","console","log","user","confirmUser","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9bd054a7.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({ phoneFilter, handleFilterChange }) => {\n  return (\n    <div>\n      filter shown with{' '}\n      <input value={phoneFilter} onChange={handleFilterChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({\n  handleSubmit,\n  handleNameChange,\n  handleNumberChange,\n  newName,\n  newNumber,\n}) => {\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <div>\n          name: <input onChange={handleNameChange} value={newName} />\n        </div>\n        <div>\n          number: <input onChange={handleNumberChange} value={newNumber} />\n        </div>\n        <div>\n          <button type='submit'>add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ phoneFilter, persons, handleDelete }) => {\n  return (\n    <>\n      {phoneFilter\n        ? persons\n            .filter((person) =>\n              person['name'].toLowerCase().startsWith(phoneFilter.toLowerCase())\n            )\n            .map((person) => (\n              <div key={person.name}>\n                {person.name} {person.number}{' '}\n                <button onClick={handleDelete} id={person.id}>\n                  delete\n                </button>\n              </div>\n            ))\n        : persons.map((person) => (\n            <div key={person.name}>\n              {person.name} {person.number}{' '}\n              <button onClick={handleDelete} id={person.id}>\n                delete\n              </button>\n            </div>\n          ))}\n    </>\n  );\n};\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ message, error }) => {\n  return (\n    <div>\n      {error && message == null ? (\n        <div className='success'>{message}</div>\n      ) : null}\n      {error ? <div className='error'>{message}</div> : null}\n      {!error && message ? <div className='success'>{message}</div> : null}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst deleteUser = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\n// Find user with same name, and update phone number\n\nconst update = (id, updatedPerson) => {\n  return axios.put(`${baseUrl}/${id}`, updatedPerson);\n};\n\nexport default {\n  getAll: getAll,\n  create: create,\n  deleteUser: deleteUser,\n  update: update,\n};\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\nimport './index.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [phoneFilter, setFilter] = useState('');\n  const [deleted, setDeleted] = useState(false);\n  const [updated, setUpdated] = useState(false);\n  const [updateMessage, setUpdateMessage] = useState(null);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n  }, [deleted, updated]);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const checkPersons = persons.map(({ name }) => name);\n    if (checkPersons.includes(newName)) {\n      let personToUpdate = persons.filter((p) => p.name == newName);\n      // console.log('personToUpdate ', personToUpdate);\n      // console.log('personToUpdate id ', personToUpdate[0].id);\n      let updateAlert = window.confirm(\n        `${newName} is already added to phonebook, replace old number with new one?`\n      );\n      alert(updateAlert);\n      // console.log(event.target[1].value);\n      personService\n        .update(personToUpdate[0].id, {\n          name: personToUpdate[0].name,\n          number: event.target[1].value,\n        })\n        .then(() => {\n          setPersons([...persons]);\n          setUpdated(true);\n          setUpdateMessage(`${personToUpdate[0].name} has been updated`);\n          setTimeout(() => {\n            setUpdateMessage(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          setError(true);\n          setUpdateMessage(\n            `Information of ${personToUpdate[0].name} has already been removed`\n          );\n          setPersons([...persons.filter((p) => p.id !== personToUpdate[0].id)]);\n        });\n      setNewName('');\n      setNewNumber('');\n      setUpdated(false);\n      return false;\n    }\n    if (newName && newNumber) {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      };\n      personService.create(personObject).then((response) => {\n        setPersons(persons.concat(response.data));\n        console.log(persons);\n        setUpdateMessage(`Added ${personObject.name}`);\n        setTimeout(() => {\n          setUpdateMessage(null);\n        }, 3000);\n        setNewName('');\n        setNewNumber('');\n      });\n    }\n  };\n\n  const handleDelete = (id) => {\n    // console.log(id);\n    let user = persons.filter((p) => p.id == id);\n    // console.log(user);\n    let confirmUser = window.confirm(`Delete ${user[0].name} ?`);\n    alert(confirmUser);\n    personService\n      .deleteUser(id)\n      .then(() => setDeleted(true))\n      .then(() => setPersons(persons.filter((p) => p.id !== id)));\n    setDeleted(false);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter\n        phoneFilter={phoneFilter}\n        handleFilterChange={handleFilterChange}\n      />\n      <Notification message={updateMessage} error={error} />\n      <h2>Add a new</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        phoneFilter={phoneFilter}\n        handleDelete={(event) => handleDelete(event.target.id)}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}